{% extends 'home/base.html' %}
{% load static %}

{% block title %} Clip - Profile {% endblock %}

{% block head %}

{% endblock %}

{% block content %}

<main class="pt-16 pb-5 px-5 md:pt-20">
    <div class="flex w-full justify-center items-center">
        <div class="container mx-auto">
            <!-- Header -->
            <header class="flex justify-between items-center mb-4 md:mb-8">
                <h1 class="text-2xl font-bold text-[#c9d1d9] md:text-3xl">Profile</h1>
            </header>

            <!-- Profile Card -->
            <div class="bg-[var(--card-bg)] border border-custom-card cursor-pointer overflow-hidden mb-8">
                <div class="md:flex">
                    <!-- Profile Picture Section -->
                    <div class="md:w-1/3 px-6 pt-6 pb-4 flex flex-col items-center md:p-6">
                        <div
                            class="inline-block relative rounded-full bg-[#6c757d] !border-[5px] [border-color:var(--btn-bg)] overflow-hidden md:!border-[6px]">
                            <img id="profile-pic" src="{% static 'images/default.png' %}" alt="Profile"
                                class="w-24 h-24 rounded-full object-cover md:w-32 md:h-32">
                        </div>
                    </div>
                    <!-- Profile Info Section -->
                    <div class="flex flex-col items-center px-6 pb-6 pt-0  md:items-start md:w-2/3 md:p-6">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h2 id="username"
                                    class="text-center text-2xl font-bold text-[#c9d1d9] md:text-2xl md:text-left">{{ user.username }}</h2>
                                <p id="user-email" class="text-sm text-[#58a6ff] md:text-lg">{{ user.email }}</p>
                            </div>
                        </div>

                        <div>
                            <div class="flex items-center">
                                <div class="text-gray-400 pr-3">Joined : </div>
                                <div id="joined-date" class="font-medium text-[#c9d1d9]">January 15, 2022</div>
                            </div>
                        </div>
                        <div class="flex justify-around w-full mt-4 md:gap-4 md:justify-start">
                            <button id="change-email"
                                class="btn-primary inline-flex items-center text-white text-xs font-medium transition md:text-sm md:px-6 md:py-3">
                                <svg xmlns="http://www.w3.org/2000/svg"
                                    class="h-3 w-3 mr-2 fill-current md:h-4 md:w-4 md:mr-4" viewBox="0 0 512 512">
                                    <path
                                        d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4L236.8 313.6c11.4 8.5 27 8.5 38.4 0L492.8 150.4c12.1-9.1 19.2-23.3 19.2-38.4c0-26.5-21.5-48-48-48L48 64zM0 176L0 384c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-208L294.4 339.2c-22.8 17.1-54 17.1-76.8 0L0 176z" />
                                </svg>
                                Edit Email
                            </button>
                            <button id="change-password"
                                class="inline-flex items-center px-4 py-3 bg-[var(--bg)] border border-custom-card text-gray-300 text-xs font-medium transition hover:bg-gray-700 hover:text-white md:text-sm md:px-6 md:py-3">
                                <svg xmlns="http://www.w3.org/2000/svg"
                                    class="h-3 w-3 mr-2 fill-current md:h-4 md:w-4 md:mr-4" viewBox="0 0 512 512">
                                    <path
                                        d="M336 352c97.2 0 176-78.8 176-176S433.2 0 336 0S160 78.8 160 176c0 18.7 2.9 36.8 8.3 53.7L7 391c-4.5 4.5-7 10.6-7 17l0 80c0 13.3 10.7 24 24 24l80 0c13.3 0 24-10.7 24-24l0-40 40 0c13.3 0 24-10.7 24-24l0-40 40 0c6.4 0 12.5-2.5 17-7l33.3-33.3c16.9 5.4 35 8.3 53.7 8.3zM376 96a40 40 0 1 1 0 80 40 40 0 1 1 0-80z" />
                                </svg>
                                Change Password
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <!-- Bookmark Card -->
                <div class="w-full h-24">
                    <div class="w-full h-full flex items-center px-8 py-6 bg-[var(--card-bg)] 
                           border border-custom-card transition-all duration-300 ease-in-out 
                           hover:-translate-y-1 hover:shadow-[0_10px_20px_rgba(0,0,0,0.2)]">
                        <div class="flex items-center gap-5 md:gap-8">
                            <div class="p-3 rounded-full bg-[#703edb]/10 text-[var(--btn-bg)]">
                                <!-- Bookmark icon SVG -->
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" width="24" height="24"
                                    fill="currentColor">
                                    <path d="M0 48V487.7C0 501.1 10.9 512 24.3 512
                                   c5 0 9.9-1.5 14-4.4L192 400
                                   345.7 507.6c4.1 2.9 9 4.4 14 4.4
                                   c13.4 0 24.3-10.9 24.3-24.3V48
                                   c0-26.5-21.5-48-48-48H48
                                   C21.5 0 0 21.5 0 48z" />
                                </svg>
                            </div>
                            <div class="flex flex-col leading-tight">
                                <span class="text-gray-400 text-sm">Bookmarks</span>
                                <span id="bookmark-count" class="text-lg font-bold text-[#c9d1d9]">
                                    {{ total_bookmarks }}
                                </span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Import Card -->
                <div class="w-full h-24">
                    <div id="import-btn" class="w-full h-full flex items-center px-8 py-6 bg-[var(--card-bg)] 
                           border border-custom-card cursor-pointer transition-all duration-300 ease-in-out 
                           hover:-translate-y-1 hover:shadow-[0_10px_20px_rgba(0,0,0,0.2)]">
                        <div class="flex items-center gap-5 md:gap-8">
                            <div class="p-3 rounded-full bg-[#58a6ff]/10 text-[#58a6ff]">
                                <!-- Import icon SVG -->
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="24" height="24"
                                    fill="currentColor">
                                    <path d="M128 64c0-35.3 28.7-64 64-64L352 0
                                   l0 128c0 17.7 14.3 32 32 32l128 0
                                   0 288c0 35.3-28.7 64-64 64
                                   l-256 0c-35.3 0-64-28.7-64-64
                                   l0-112 174.1 0-39 39
                                   c-9.4 9.4-9.4 24.6 0 33.9
                                   s24.6 9.4 33.9 0l80-80
                                   c9.4-9.4 9.4-24.6 0-33.9l-80-80
                                   c-9.4-9.4-24.6-9.4-33.9 0
                                   s-9.4 24.6 0 33.9l39 39L128 288
                                   l0-224zm0 224l0 48L24 336
                                   c-13.3 0-24-10.7-24-24
                                   s10.7-24 24-24l104 0zM512 128
                                   l-128 0L384 0 512 128z" />
                                </svg>
                            </div>
                            <span class="text-gray-400 text-sm">Import</span>
                        </div>
                    </div>
                </div>

                <!-- Export Card -->
                <div class="w-full h-24">
                    <a href="{% url 'bookmark:export_bookmark' %}"
                         class="block w-full h-full">
                        <div class="w-full h-full flex items-center px-8 py-6 bg-[var(--card-bg)] 
                             border border-custom-card cursor-pointer transition-all duration-300 ease-in-out 
                             hover:-translate-y-1 hover:shadow-[0_10px_20px_rgba(0,0,0,0.2)]">
                            <div class="flex items-center gap-5 md:gap-8">
                                <div class="p-3 rounded-full bg-green-100/10 text-green-500">
                                    <!-- Export icon SVG -->
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" width="24" height="24"
                                        fill="currentColor">
                                        <path d="M0 64C0 28.7 28.7 0 64 0L224 0
                                     l0 128c0 17.7 14.3 32 32 32l128 0
                                     0 128-168 0c-13.3 0-24 10.7-24 24
                                     s10.7 24 24 24l168 0 0 112
                                     c0 35.3-28.7 64-64 64L64 512
                                     c-35.3 0-64-28.7-64-64L0 64z
                                     M384 336l0-48 110.1 0-39-39
                                     c-9.4-9.4-9.4-24.6 0-33.9
                                     s24.6-9.4 33.9 0l80 80
                                     c9.4 9.4 9.4 24.6 0 33.9
                                     l-80 80c-9.4 9.4-24.6 9.4-33.9 0
                                     s-9.4-24.6 0-33.9l39-39L384 336
                                     zm0-208l-128 0L256 0 384 128z" />
                                    </svg>
                                </div>
                                <span class="text-gray-400 text-sm">Export</span>
                            </div>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Import Modal Backdrop -->
    <div id="import-modal"
        class="fixed z-50 flex justify-center items-center p-8 inset-0 bg-black/60 backdrop-blur transition-opacity duration-300 opacity-0 pointer-events-none">

        <!-- Modal Content Box -->
        <div id="import-modal-content"
            class="group border-custom-card bg-theme relative m-2 max-h-[calc(100vh-4rem)] w-full max-w-lg scale-95 transform overflow-y-auto rounded-lg p-2 opacity-0 shadow-2xl transition-all duration-300 md:w-full md:p-6 md:px-6">
            <div class="relative p-3">
                <div class="flex items-center justify-between">
                    <div>
                        <h3 class="text-lg font-semibold text-white">Upload File</h3>
                        <p class="text-sm text-slate-400">Drag &amp; drop your JSON file here</p>
                    </div>

                    <div class="rounded-lg bg-[#7c43ef1A] p-2">
                        <svg class="h-6 w-6 text-[var(--btn-bg)]" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                        </svg>
                    </div>
                </div>

                <!-- Dropzone -->
                <div class="group/dropzone mt-6">
                    <div
                        class="relative rounded-xl border-2 border-dashed border-slate-700 bg-[#0f172a80] p-8 transition-colors group-hover/dropzone:border-[#703edbcc]">
                        <input id="import-file-input" type="file"
                            class="absolute inset-0 z-50 h-full w-full cursor-pointer opacity-0" accept=".json" />
                        <div class="pointer-events-none space-y-6 text-center">
                            <div class="bg-theme mx-auto flex h-20 w-20 items-center justify-center rounded-full">
                                <svg class="h-10 w-10 text-[var(--btn-bg)]" fill="none" viewBox="0 0 24 24"
                                    stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                                </svg>
                            </div>

                            <div class="space-y-2">
                                <p class="text-base font-medium text-white">Drop your file here or browse</p>
                                <p class="text-sm text-slate-400">Supported file: JSON</p>
                                <p class="text-xs text-slate-400">Max file size: 10MB</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- File Name Display -->
                <p id="file-name-display" class="mt-4 text-center text-sm text-gray-300"></p>

                <!-- Import Feedback Message -->
                <p id="import-feedback" class="mt-2 text-center text-sm text-red-500"></p>

                <!-- Buttons -->
                <div class="mt-6 grid grid-cols-2 gap-4">
                    <button id="cancel-import-btn"
                        class="bg-theme flex items-center justify-center gap-2 rounded-xl px-4 py-2 font-medium text-white transition-colors hover:bg-slate-800">Cancel</button>

                    <button id="confirm-import-btn"
                        class="hidden group/btn relative  overflow-hidden rounded-xl bg-[var(--btn-bg)] p-px font-medium text-white shadow-[0_1000px_0_0_hsl(0_0%_100%_/_0%)_inset] transition-colors hover:shadow-[0_1000px_0_0_hsl(0_0%_100%_/_2%)_inset]">
                        <span
                            class="relative flex items-center justify-center gap-2 rounded-xl bg-[#0f172a80] px-4 py-2 transition-colors group-hover/btn:bg-transparent">
                            Import
                            <svg class="h-4 w-4 transition-transform duration-300 group-hover/btn:translate-x-1"
                                fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                            </svg>
                        </span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Password Edit Modal -->
    <div id="pass-modal"
        class="fixed z-50 flex justify-center items-center p-8 inset-0 bg-black/60 backdrop-blur transition-opacity duration-300 opacity-0 pointer-events-none">
        <div id="pass-modal-content"
            class="relative border-custom-card w-full max-w-lg max-h-[calc(100vh-4rem)] overflow-y-auto bg-theme rounded-lg p-5 m-2 shadow-lg opacity-0 scale-95 transition-all duration-300 transform md:px-6 md:p-6 md:w-full">
            <div class="flex flex-col space-y-1.5 text-center sm:text-left">
                <h2 class="text-sm font-semibold leading-none tracking-tight md:text-lg">Update Password</h2>
                <p class="text-xs text-gray-400 md:text-sm">change your password.</p>
            </div>
            <button type="button" id="pass-closeBtn"
                class="absolute right-4 top-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:ring-offset-purple-700 disabled:pointer-events-none">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M18 6 6 18"></path>
                    <path d="m6 6 12 12"></path>
                </svg>
            </button>

            <div class="grid gap-4 pt-4 md:gap-6">
                <!-- current password Input -->
                <div class="grid gap-2 relative">
                    <label for="current-password" class="block text-sm font-medium mb-1">Current Password</label>
                    <input id="current-password" type="password" placeholder="Current password" required minlength="8"
                        class="flex border-custom-card h-10 w-full text-xs bg-theme px-3 py-2 placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-purple-500 transition disabled:cursor-not-allowed disabled:opacity-50 md:text-sm" />
                    <button type="button" id="toggleCurrentPassword"
                        class="absolute inset-y-0 right-0 pr-3 pt-8 flex items-center  text-gray-400 md:pr-4">
                        <!-- Eye Slash Icon (initially visible) -->
                        <svg id="eye-slash-icon-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 -64 640 640"
                            width="24" height="24" fill="currentColor" class="h-5 w-5">
                            <path
                                d="M634 471L36 3.51A16 16 0 0 0 13.51 6l-10 12.49A16 16 0 0 0 6 41l598 467.49a16 16 0 0 0 22.49-2.49l10-12.49A16 16 0 0 0 634 471z M296.79 146.47l134.79 105.38C429.36 191.91 380.48 144 320 144a112.26 112.26 0 0 0-23.21 2.47z m46.42 219.07L208.42 260.16C210.65 320.09 259.53 368 320 368a113 113 0 0 0 23.21-2.46z M320 112c98.65 0 189.09 55 237.93 144a285.53 285.53 0 0 1-44 60.2l37.74 29.5a333.7 333.7 0 0 0 52.9-75.11 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64c-36.7 0-71.71 7-104.63 18.81l46.41 36.29c18.94-4.3 38.34-7.1 58.22-7.1z m0 288c-98.65 0-189.08-55-237.93-144a285.47 285.47 0 0 1 44.05-60.19l-37.74-29.5a333.6 333.6 0 0 0-52.89 75.1 32.35 32.35 0 0 0 0 29.19C89.72 376.41 197.08 448 320 448c36.7 0 71.71-7.05 104.63-18.81l-46.41-36.28C359.28 397.2 339.89 400 320 400z" />
                        </svg>
                        <!-- Eye Icon (initially hidden) -->
                        <svg id="eye-open-icon-current" class="h-5 w-5 hidden" width="24" height="24" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                        </svg>
                    </button>
                </div>

                <!-- new password Input -->
                <div class="grid gap-2 relative">
                    <label for="new-password" class="block text-sm font-medium mb-1">New Password</label>
                    <input id="new-password" type="password" placeholder="New password" required minlength="8"
                        class="flex border-custom-card h-10 w-full text-xs bg-theme px-3 py-2 placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-purple-500 transition disabled:cursor-not-allowed disabled:opacity-50 md:text-sm" />
                    <button type="button" id="toggleNewPassword"
                        class="absolute inset-y-0 right-0 pr-3 pt-5 flex items-center  text-gray-400 md:pr-4">
                        <!-- Eye Slash Icon (initially visible) -->
                        <svg id="eye-slash-icon-new" xmlns="http://www.w3.org/2000/svg" viewBox="0 -64 640 640"
                            width="24" height="24" fill="currentColor" class="h-5 w-5">
                            <path
                                d="M634 471L36 3.51A16 16 0 0 0 13.51 6l-10 12.49A16 16 0 0 0 6 41l598 467.49a16 16 0 0 0 22.49-2.49l10-12.49A16 16 0 0 0 634 471z M296.79 146.47l134.79 105.38C429.36 191.91 380.48 144 320 144a112.26 112.26 0 0 0-23.21 2.47z m46.42 219.07L208.42 260.16C210.65 320.09 259.53 368 320 368a113 113 0 0 0 23.21-2.46z M320 112c98.65 0 189.09 55 237.93 144a285.53 285.53 0 0 1-44 60.2l37.74 29.5a333.7 333.7 0 0 0 52.9-75.11 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64c-36.7 0-71.71 7-104.63 18.81l46.41 36.29c18.94-4.3 38.34-7.1 58.22-7.1z m0 288c-98.65 0-189.08-55-237.93-144a285.47 285.47 0 0 1 44.05-60.19l-37.74-29.5a333.6 333.6 0 0 0-52.89 75.1 32.35 32.35 0 0 0 0 29.19C89.72 376.41 197.08 448 320 448c36.7 0 71.71-7.05 104.63-18.81l-46.41-36.28C359.28 397.2 339.89 400 320 400z" />
                        </svg>
                        <!-- Eye Icon (initially hidden) -->
                        <svg id="eye-open-icon-new" class="h-5 w-5 hidden" width="24" height="24" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                        </svg>
                    </button>
                    <p id="new-password-error" class="mt-1 text-red-500 text-sm"></p>
                </div>

                <!-- confirm password Input -->
                <div class="grid gap-2 relative">
                    <label for="confirm-password" class="block text-sm font-medium mb-1">Confirm Password</label>
                    <input id="confirm-password" type="password" placeholder="Confirm password" name="confirm_password"
                        required minlength="8"
                        class="flex border-custom-card h-10 w-full text-xs bg-theme px-3 py-2 placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-purple-500 transition disabled:cursor-not-allowed disabled:opacity-50 md:text-sm" />
                    <button type="button" id="toggleConfirmPassword"
                        class="absolute inset-y-0 right-0 pr-3 pt-8 flex items-center  text-gray-400 md:pr-4">
                        <!-- Eye Slash Icon (initially visible) -->
                        <svg id="eye-slash-icon-confirm" xmlns="http://www.w3.org/2000/svg" viewBox="0 -64 640 640"
                            width="24" height="24" fill="currentColor" class="h-5 w-5">
                            <path
                                d="M634 471L36 3.51A16 16 0 0 0 13.51 6l-10 12.49A16 16 0 0 0 6 41l598 467.49a16 16 0 0 0 22.49-2.49l10-12.49A16 16 0 0 0 634 471z M296.79 146.47l134.79 105.38C429.36 191.91 380.48 144 320 144a112.26 112.26 0 0 0-23.21 2.47z m46.42 219.07L208.42 260.16C210.65 320.09 259.53 368 320 368a113 113 0 0 0 23.21-2.46z M320 112c98.65 0 189.09 55 237.93 144a285.53 285.53 0 0 1-44 60.2l37.74 29.5a333.7 333.7 0 0 0 52.9-75.11 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64c-36.7 0-71.71 7-104.63 18.81l46.41 36.29c18.94-4.3 38.34-7.1 58.22-7.1z m0 288c-98.65 0-189.08-55-237.93-144a285.47 285.47 0 0 1 44.05-60.19l-37.74-29.5a333.6 333.6 0 0 0-52.89 75.1 32.35 32.35 0 0 0 0 29.19C89.72 376.41 197.08 448 320 448c36.7 0 71.71-7.05 104.63-18.81l-46.41-36.28C359.28 397.2 339.89 400 320 400z" />
                        </svg>
                        <!-- Eye Icon (initially hidden) -->
                        <svg id="eye-open-icon-confirm" class="h-5 w-5 hidden" width="24" height="24" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                        </svg>
                    </button>
                </div>

                <div>
                    <p id="password-errors" class="text-red-500 text-sm"></p>
                </div>

                <div class="flex flex-col-reverse gap-3 sm:flex-row sm:justify-end sm:space-x-2">
                    <button id="pass-submit"
                        class="inline-flex btn-primary justify-center items-center text-xs font-medium gap-2 h-10 px-4 py-2 whitespace-nowrap  ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 text-primary-foreground md:text-sm">
                        Update Password
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Change Email Modal -->
    <div id="email-modal"
        class="fixed z-50 flex justify-center items-center p-8 inset-0 bg-black/60 backdrop-blur transition-opacity duration-300 opacity-0 pointer-events-none">
        <div id="email-modal-content"
            class="relative border-custom-card w-full max-w-lg max-h-[calc(100vh-4rem)] overflow-y-auto bg-theme rounded-lg p-5 m-2 shadow-lg opacity-0 scale-95 transition-all duration-300 transform md:px-6 md:p-6 md:w-full">
            <div class="flex flex-col space-y-1.5 text-center sm:text-left">
                <h2 class="text-sm font-semibold leading-none tracking-tight md:text-lg">Update Email</h2>
                <p class="text-xs text-gray-400 md:text-sm">change your Email address.</p>
            </div>
            <button type="button" id="email-closeBtn"
                class="absolute right-4 top-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:ring-offset-purple-700 disabled:pointer-events-none">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M18 6 6 18"></path>
                    <path d="m6 6 12 12"></path>
                </svg>
            </button>

            <div class="grid gap-4 pt-4 md:gap-6">

                <!-- current email Input -->
                <div class="grid gap-2 relative">
                    <label for="current-email" class="block text-sm font-medium mb-1">Current Email</label>
                    <input id="current-email" type="email" placeholder="Current email" required disabled
                        value="{{ user.email }}"
                        class="flex border-custom-card h-10 w-full text-xs bg-theme px-3 py-2 placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-purple-500 transition disabled:cursor-not-allowed disabled:opacity-50 md:text-sm" />
                </div>

                <!-- new email Input -->
                <div class="grid gap-2 relative">
                    <label for="new-email" class="block text-sm font-medium mb-1">New Email</label>
                    <input id="new-email" type="email" placeholder="New email" required
                        class="flex border-custom-card h-10 w-full text-xs bg-theme px-3 py-2 placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-purple-500 transition disabled:cursor-not-allowed disabled:opacity-50 md:text-sm" />
                    <p id="new-email-error" class="mt-1 text-red-500 text-sm"></p>
                </div>

                <!-- current password Input -->
                <div class="grid gap-2 relative">
                    <label for="email-current-password" class="block text-sm font-medium mb-1">Current
                        Password</label>
                    <input id="email-current-password" type="password" placeholder="Current password" required
                        class="flex border-custom-card h-10 w-full text-xs bg-theme px-3 py-2 placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-purple-500 transition disabled:cursor-not-allowed disabled:opacity-50 md:text-sm" />
                    <button type="button" id="toggleEmailCurrentPassword"
                        class="absolute inset-y-0 right-0 pr-3 pt-8 flex items-center  text-gray-400 md:pr-4">
                        <!-- Eye Slash Icon (initially visible) -->
                        <svg id="eye-slash-icon-email-current" xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 -64 640 640" width="24" height="24" fill="currentColor" class="h-5 w-5">
                            <path
                                d="M634 471L36 3.51A16 16 0 0 0 13.51 6l-10 12.49A16 16 0 0 0 6 41l598 467.49a16 16 0 0 0 22.49-2.49l10-12.49A16 16 0 0 0 634 471z M296.79 146.47l134.79 105.38C429.36 191.91 380.48 144 320 144a112.26 112.26 0 0 0-23.21 2.47z m46.42 219.07L208.42 260.16C210.65 320.09 259.53 368 320 368a113 113 0 0 0 23.21-2.46z M320 112c98.65 0 189.09 55 237.93 144a285.53 285.53 0 0 1-44 60.2l37.74 29.5a333.7 333.7 0 0 0 52.9-75.11 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64c-36.7 0-71.71 7-104.63 18.81l46.41 36.29c18.94-4.3 38.34-7.1 58.22-7.1z m0 288c-98.65 0-189.08-55-237.93-144a285.47 285.47 0 0 1 44.05-60.19l-37.74-29.5a333.6 333.6 0 0 0-52.89 75.1 32.35 32.35 0 0 0 0 29.19C89.72 376.41 197.08 448 320 448c36.7 0 71.71-7.05 104.63-18.81l-46.41-36.28C359.28 397.2 339.89 400 320 400z" />
                        </svg>
                        <!-- Eye Icon (initially hidden) -->
                        <svg id="eye-open-icon-email-current" class="h-5 w-5 hidden" width="24" height="24" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                        </svg>
                    </button>
                </div>
                <div>
                    <p id="email-errors" class="text-red-500 text-sm"></p>
                </div>
                <div class="flex flex-col-reverse gap-3 sm:flex-row sm:justify-end sm:space-x-2">
                    <button id="email-submit"
                        class="inline-flex btn-primary justify-center items-center text-xs font-medium gap-2 h-10 px-4 py-2 whitespace-nowrap  ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 text-primary-foreground md:text-sm">
                        Update Email
                    </button>
                </div>
            </div>
        </div>
    </div>
</main>

<script src="{% static 'accounts/js/profile.js' %}"></script>

{% endblock %}